function flash_msg(t,e){new Noty({theme:"relax",text:e,type:t,layout:"topRight",timeout:1e3}).show()}let createPost=function(){let t=$("#new-post-form");t.submit((function(e){e.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:t.serialize(),success:function(t){let e=newPostDom(t.data.post);$("#posts-list-container").prepend(e),flash_msg("success","Post created Successfully!"),deletePost($(".delete-post-button",e)),new PostComments(t.data.post._id),$("#new-post-form")[0].reset(),new ToggleLike($(".toggle-like-button",e))},error:function(t){console.log(t.responseText)}})}))},newPostDom=function(t){return console.log(t),$(`<div class="card w-100 mt-3 mb-2" id="post-${t._id}">\n        <div class="card-body">\n    \n            \x3c!-- options to delete a post and stuff --\x3e\n            \n            <div class="dropdown">\n                <a class="float-right" href="" id="more_options_${t._id}" data-toggle="dropdown" aria-haspopup="true"\n                    aria-expanded="false">\n                    <i class="fas fa-ellipsis-h"></i>\n                </a>\n                <div class="dropdown-menu" aria-labelledby="more_options_${t._id}">\n                    <a class="delete-post-button dropdown-item " href="/posts/destroy/${t._id}"><i\n                            class="fas fa-trash-alt"></i>\n                        Delete</a>\n                </div>\n            </div>\n            \n            <h5 class="card-title">${t.user.name}</h5>\n            <p class="card-text">${t.content}</p>\n            <div class="card-text mt-2"><small>${t.user.updatedAt.toString().substr(0,15)}</small></div>\n            <hr>\n            \n            <a href="/likes/toggle/?id=${t._id}&type=Post" class="toggle-like-button"\n             data-likes="0"><i class="far fa-heart"></i> <span>0</span></a>\n            &nbsp&nbsp&nbsp\n            <a data-toggle="collapse" href="#collapse_${t._id}" role="button" aria-expanded="false"\n                aria-controls="collapse${t._id}"><i class="far fa-comment"></i></a>&nbsp&nbsp&nbsp\n            <a href=""><i class="fas fa-paper-plane"></i></a>\n        </div>\n        <div class="collapse post-comments mr-2 ml-2" id="collapse_${t._id}">\n            \n            <form action="/comments/create" method="POST" id="post-${t._id}-comments-form">\n                <input type="text" class="form-control" placeholder="Add a new Comment..." aria-label="Username"\n                    aria-describedby="basic-addon1" name="content" required>\n                <input type="hidden" name="post" value="${t._id}">\n                <button type="submit" class="btn btn-primary btn-sm mt-2 mb-2 mr-2">Add Comment</button>\n            </form>\n            \x3c!-- comments list container --\x3e\n            <hr>\n            <div class="post-comments-list pl-4 pr-4">\n                <div id="post-comments-${t._id}">\n                \n                </div>\n            </div>\n            \n        </div>\n    </div>`)},deletePost=function(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$("#post-"+t.data.post_id).remove(),flash_msg("success","Post Deleted!")},error:function(t){console.log(t.responseText)}})}))},deleteAllPosts=function(){$("#posts-list-container>div").each((function(){deletePost($(" .delete-post-button",this));let t=$(this).prop("id").split("-")[1];new PostComments(t)}))};createPost(),deleteAllPosts();